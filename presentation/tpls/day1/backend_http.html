<section>
    <section>
        <h2>Talking to a back-end</h2>
        <img src="http://www.itrnews.com/images/2012/2012-12-26-Mainframe.jpg" alt=""/>
    </section>

    <section>
        <h2>Restful API with MongoLab</h2>
        <img src="https://mongolab.com/base/img/mongolab-logo-250x65.png" alt=""/><br>
        <a target="_blank" href="https://support.mongolab.com/entries/20433053-Is-there-a-REST-API-for-MongoDB-">REST MongoDB API in the cloud</a><br>
    </section>


    <section>
        <h2>$http service</h2>
        <pre><code ng-non-bindable><%= includeCode('exercises/05_backend_http/solution/userstorage.js', 'api') %></code></pre>
    </section>

    <section>
        <h2>$http interactions are fully asynchronous</h2>
        <img src="http://eightandahalfbit.files.wordpress.com/2013/03/pizzaphone.jpg" alt=""/>
    </section>

    <section>
        <h2>We need better abstractions to work in the asynchronous World</h2>
        <ul>
            <ul>
                <li>When the $http method call ends, results are not ready</li>
                <li>When an error occurs there is no-one to catch it</li>
            </ul>
        </ul>
    </section>

    <section>
        <h2>2 ways dealing with asynchronous code</h2>
        <ul>
            <li>Callbacks</li>
            <li>Promises</li>
        </ul>
    </section>

    <section>
        <h2>Callbacks are not cool</h2>
        <img src="http://www.qlanguage.com.hk/wp-content/uploads/2013/09/it-stinks-300x300.jpg"><br/>
        <ul>
            <li>Chained calls ("callbacks hell")</li>
            <li>Error handling</li>
            <li>Parallel calls</li>
        </ul>
    </section>

    <section>
        <h2>$http with the promise APi</h2>
        <h4>Service</h4>
        <pre><code ng-non-bindable><%= includeCode('exercises/05_backend_http/solution/userstorage.js', 'api') %></code></pre>
        <h4>Controller</h4>
        <pre><code ng-non-bindable><%= includeCode('exercises/05_backend_http/solution/users.js', 'client') %></code></pre>
    </section>

    <section>
        <h2>$http building blocks</h2>
        <h4>$http depends on $httpBackend</h4>
    </section>

    <section>
        <h2>Testing interactions with $http</h2>
        <pre><code ng-non-bindable><%= includeCode('exercises/05_backend_http/solution/userstorage.spec.js', 'test') %></code></pre>
        <pre><code ng-non-bindable><%= includeCode('exercises/05_backend_http/solution/userstorage.spec.js', 'strict') %></code></pre>
    </section>

    <section>
        <h2>2 ways of expressing expectations</h2>
        <h3>Code oriented vs. back-end oriented</h3>
        <a href="http://docs.angularjs.org/api/ngMock.$httpBackend" target="_blank">expect vs. when</a>
        <p>(or application-focused vs. backend-focused)</p>
    </section>

    <section>
        <h1>Exercise</h1>
        <h2 stopwatch="30"></h2>
        <p>Change the UserStorage service to work with the MongoLab REST API.</p>
        <p>Check tests and make them pass.</p>
    </section>


</section>